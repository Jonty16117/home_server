.:53 {
    log
    errors
    bind {{ coredns_bind_ip }}

    # Zone files for internal domains
{% for zone_file, _ in coredns_zones.items() %}
    file /etc/coredns/{{ zone_file }}.db {{ zone_file }}
{% endfor %}

    forward . {{ forwarders | default('1.1.1.1 8.8.8.8') }}
    cache {{ cache_ttl | default(30) }}
}
